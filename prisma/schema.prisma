generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model users {
  id                Int           @id @default(autoincrement())
  email             String        @db.VarChar(250)
  name              String        @db.VarChar(255)
  password          String        @db.VarChar(255)
  status            String        @db.VarChar(250)
  verification_code Int
  offers            offers[]
  company           user_company?
}

model user_company {
  id                  Int    @id @default(autoincrement())
  user_id             Int    @unique
  name                String @db.VarChar(10000)
  phone_number        String @db.VarChar(250)
  inn                 String @db.VarChar(250)
  city                Int
  industry            Int
  about_us            String @db.VarChar(250)
  interest_categories Json
  sites               Json
  image_path          String @db.VarChar(1000)
  status              String @db.VarChar(255)
  plan                String @db.VarChar(255)

  city_data     countries_tb @relation(fields: [city], references: [id])
  industry_data Industry     @relation(fields: [industry], references: [id])
  user          users        @relation(fields: [user_id], references: [id], onDelete: Cascade)
}

model company_reviews {
  id         Int    @id @default(autoincrement())
  company_id Int
  count      Int
  review     String @db.Text
}

model countries_tb {
  id             Int            @id @default(autoincrement())
  name           String         @db.VarChar(250)
  name_alt       String         @db.VarChar(255)
  label          String         @db.VarChar(255)
  type           String         @db.VarChar(255)
  typeShort      String         @db.VarChar(255)
  contentType    String         @db.VarChar(255)
  okato          String         @db.VarChar(255)
  oktmo          String         @db.VarChar(255)
  isDualName     Boolean
  isCapital      Boolean
  zip            Int
  population     Int
  yearFounded    String         @db.VarChar(250)
  yearCityStatus Int
  name_en        String         @db.VarChar(200)
  namecase       Json
  coords         Json
  timezone       Json
  region         Json
  user_company   user_company[]
}

model Industry {
  id        Int     @id @default(autoincrement())
  name      String? @db.VarChar(250)
  parent_id Int?

  user_company user_company[]
}

model categories {
  id        Int    @id @default(autoincrement())
  name      String @db.VarChar(250)
  parent_id Int?
}

model offers {
  id          Int    @id @default(autoincrement())
  user_id     Int
  name        String @db.VarChar(1000)
  type        String
  vid         String
  category    Json
  price       String
  coordinates Json
  description String @db.VarChar(5000)
  images      Json
  videos      Json
  status      String

  user users @relation(fields: [user_id], references: [id])
}
